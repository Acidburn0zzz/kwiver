function (add_vistk_plugin name define)
  add_library(${name} SHARED
    ${ARGN})

  # TODO: The usage of CMAKE_BINARY_DIR needs to be fixed.
  set_target_properties(${name}
    PROPERTIES
      DEFINE_SYMBOL            ${define}
      LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib/vistk"
      RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin/vistk"
      PREFIX                   "")

  install(
    TARGETS       ${name}
    LIBRARY
      DESTINATION "lib${LIB_SUFFIX}/vistk"
    RUNTIME
      DESTINATION bin
    COMPONENT     runtime)
endfunction (add_vistk_plugin name define)
